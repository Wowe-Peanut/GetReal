[gd_scene load_steps=11 format=2]

[ext_resource path="res://Testing.gd" type="Script" id=1]

[sub_resource type="PlaneMesh" id=1]
size = Vector2( 100, 100 )

[sub_resource type="SpatialMaterial" id=2]
albedo_color = Color( 0.00784314, 0, 1, 1 )

[sub_resource type="CubeMesh" id=3]
resource_local_to_scene = true
material = SubResource( 2 )

[sub_resource type="SpatialMaterial" id=4]
resource_local_to_scene = true
albedo_color = Color( 1, 0, 0, 1 )

[sub_resource type="SpatialMaterial" id=5]
resource_local_to_scene = true
albedo_color = Color( 0.192157, 1, 0, 1 )

[sub_resource type="CubeMesh" id=6]
material = SubResource( 5 )

[sub_resource type="Shader" id=7]
code = "shader_type spatial;
render_mode unshaded;

uniform sampler2D cam1;
uniform sampler2D cam2;

void fragment() {
	ALBEDO = texture(cam1, UV).rgb;
	vec4 cam2Tex = texture(cam2, UV);
	if(cam2Tex.a != 0.0) {
		ALBEDO = texture(cam2, UV).rgb;
	}
	
}"

[sub_resource type="ShaderMaterial" id=8]
shader = SubResource( 7 )

[sub_resource type="QuadMesh" id=9]
material = SubResource( 8 )

[node name="Testing" type="Spatial"]
script = ExtResource( 1 )

[node name="Floor" type="MeshInstance" parent="."]
mesh = SubResource( 1 )
material/0 = null

[node name="Box" type="MeshInstance" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0 )
mesh = SubResource( 3 )
material/0 = SubResource( 4 )

[node name="Box2" type="MeshInstance" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 4.09746, 1, -7.93604 )
mesh = SubResource( 3 )
material/0 = null

[node name="Box3" type="MeshInstance" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4.06551, 1, -5.08999 )
mesh = SubResource( 6 )
material/0 = null

[node name="MirrorSurface" type="MeshInstance" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.91076, 3.82494 )
mesh = SubResource( 9 )
material/0 = null

[node name="Viewport" type="Viewport" parent="MirrorSurface"]
size = Vector2( 100, 100 )
transparent_bg = true
render_target_v_flip = true

[node name="Camera" type="Camera" parent="MirrorSurface/Viewport"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1.09374, 1.27651, 3.5523 )
current = true

[node name="Viewport2" type="Viewport" parent="MirrorSurface"]
size = Vector2( 100, 100 )
transparent_bg = true

[node name="Camera" type="Camera" parent="MirrorSurface/Viewport2"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 2.31891, 2.46449, 2.77537 )
current = true

[node name="Camera" type="Camera" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.76624, 5.45445 )
current = true
